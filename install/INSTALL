
CUNI Khresmoi MT Service installation instructions
==================================================

We assume that $VERSION is 'dev' or 'stable' and $USER is the user account
that will own and run the services (user 'khresmoi' by default).

Prerequisities:
========================


Appserver installation:
========================


Workers installation:
========================

We assume that we have a NFS share accessible from all workers in /mnt/share
(if not, you must copy these resources to all workers).
Prepare the needed resources in the shared directory:

* Checkout the khresmoi-mt Git repository to /mnt/share/git-$VERSION:

  git clone http://quest.ms.mff.cuni.cz/khresmoi/client/git-$VERSION

* Install Moses to to /mnt/share/moses-$VERSION

* Install Python virtual environment to /mnt/share/virtualenv: 
  Read, adjust, and run install_virtualenv.sh from this directory.

Prepare configuration (do this for all workers):

* Prepare directories by linking from the NFS share and copying configuration
  examples from Git:
  Read, adjust, and run link_dirs.sh from this directory.

* Copy the Moses translation and recasing models to a subdirectory of the
  ~$USER/mt-$VERSION/models directory (e.g. 'ende' for English-German
  translation).
  The Moses INI files may contain relative paths as the Moses binaries will be
  run from this directory.

* Adjust configuration in the ~$USER/mt-$VERSION/config directory according
  to the used language pair and models.

* If you need the MT service to be started on the machine startup, add the
  file khresmoi.conf from this directory to /etc/init.

* If you want the MT service to be checked periodically and restarted on fail,
  adjust the crontab of $USER according to the khresmoi.crontab file.


